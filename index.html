<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>LIFF Debug</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>body{font-family:system-ui,sans-serif;padding:20px}</style>
</head>
<body>
  <h2 id="status">æº–å‚™ä¸­â€¦</h2>
  <pre id="log" style="white-space:pre-wrap;background:#f7f7f7;padding:12px;border-radius:8px"></pre>
  <script>
    const LIFF_ID = "2007906926-NZW6EQ7P"; // â† æ”¾ã€ŒLINE Login channelã€è£¡çš„ LIFF IDï¼ˆå®Œæ•´å­—ä¸²ï¼‰
    const $ = (id) => document.getElementById(id);
    (async () => {
      try {
        $("status").textContent = "åˆå§‹åŒ– LIFF ä¸­â€¦";
        await liff.init({ liffId: LIFF_ID, withLoginOnExternalBrowser: true }); // å¤–éƒ¨ç€è¦½å™¨ä¹Ÿå¯è§¸ç™¼ç™»å…¥
        $("status").textContent = "æª¢æŸ¥ç™»å…¥ç‹€æ…‹â€¦";
        if (!liff.isLoggedIn()) {
          $("status").textContent = "æœªç™»å…¥ â†’ å°å‘ LINE ç™»å…¥";
          liff.login(); return;
        }
        const ctx = { os: liff.getOS(), inClient: liff.isInClient() };
        const profile = await liff.getProfile(); // éœ€åœ¨ LIFF å‹¾ profile scope
        $("status").textContent = `Hello, ${profile.displayName} ğŸ‘‹`;
        $("log").textContent = JSON.stringify({ ctx, profile }, null, 2);
      } catch (err) {
        $("status").textContent = "LIFF åˆå§‹åŒ–å¤±æ•—";
        $("log").textContent =
          `code: ${err?.code || "-"}\nmessage: ${err?.message || "-"}\ncause: ${err?.cause?.message || "-"}`;
        console.error(err);
      }
    })();
  </script>
</body>
</html>
